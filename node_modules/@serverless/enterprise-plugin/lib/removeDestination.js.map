{"version":3,"sources":["../../lib/removeDestination.js"],"names":["require","getAccessKeyForTenant","removeLogDestination","module","exports","ctx","sls","service","custom","enterprise","collectLambdaLogs","accessKey","org","destinationOpts","appUid","tenantUid","orgUid","serviceName","getServiceName","stageName","provider","getStage","regionName","getRegion"],"mappings":"AAAA;;;;;;iBAEwDA,OAAO,CAAC,0BAAD,C;MAAvDC,qB,YAAAA,qB;MAAuBC,oB,YAAAA,oB;;AAE/BC,MAAM,CAACC,OAAP;AAAA,+BAAiB,WAAOC,GAAP,EAAe;AAC9B,QACE,CAACA,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAjB,IACA,CAACH,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UADxB,IAEA,CAACJ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,UAAvB,CAAkCC,iBAHrC,EAIE;AACA;AACD;;AACD,UAAMC,SAAS,SAASV,qBAAqB,CAACI,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBK,GAAjB,CAA7C;AACA,UAAMC,eAAe,GAAG;AACtBF,MAAAA,SADsB;AAEtBG,MAAAA,MAAM,EAAET,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBO,MAFF;AAGtBC,MAAAA,SAAS,EAAEV,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBS,MAHL;AAItBC,MAAAA,WAAW,EAAEZ,GAAG,CAACC,GAAJ,CAAQC,OAAR,CAAgBW,cAAhB,EAJS;AAKtBC,MAAAA,SAAS,EAAEd,GAAG,CAACe,QAAJ,CAAaC,QAAb,EALW;AAMtBC,MAAAA,UAAU,EAAEjB,GAAG,CAACe,QAAJ,CAAaG,SAAb;AANU,KAAxB;AASA,UAAMrB,oBAAoB,CAACW,eAAD,CAA1B;AACA;AACD,GApBD;;AAAA;AAAA;AAAA;AAAA","sourcesContent":["'use strict';\n\nconst { getAccessKeyForTenant, removeLogDestination } = require('@serverless/platform-sdk');\n\nmodule.exports = async (ctx) => {\n  if (\n    !ctx.sls.service.custom ||\n    !ctx.sls.service.custom.enterprise ||\n    !ctx.sls.service.custom.enterprise.collectLambdaLogs\n  ) {\n    return;\n  }\n  const accessKey = await getAccessKeyForTenant(ctx.sls.service.org);\n  const destinationOpts = {\n    accessKey,\n    appUid: ctx.sls.service.appUid,\n    tenantUid: ctx.sls.service.orgUid,\n    serviceName: ctx.sls.service.getServiceName(),\n    stageName: ctx.provider.getStage(),\n    regionName: ctx.provider.getRegion(),\n  };\n\n  await removeLogDestination(destinationOpts);\n  return;\n};\n"],"file":"removeDestination.js"}