{"version":3,"sources":["../../lib/resolveParams.js"],"names":["memoizee","require","getAccessKeyForTenant","getDeployProfile","module","exports","org","app","stage","deploymentProfile","accessKey","tenant","params","Object","create","secretValues","name","secretName","value","secretProperties","promise","normalizer","JSON","stringify"],"mappings":"AAAA;;;;;;;;;;;;AAEA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;iBACoDA,OAAO,CAAC,0BAAD,C;MAAnDC,qB,YAAAA,qB;MAAuBC,gB,YAAAA,gB;;AAE/BC,MAAM,CAACC,OAAP,GAAiBL,QAAQ;AAAA,+BACvB,WAAO;AAAEM,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,GAAP,EAA+B;AAC7B,UAAMC,iBAAiB,SAASN,gBAAgB,CAAC;AAC/CO,MAAAA,SAAS,QAAQR,qBAAqB,CAACI,GAAD,CADS;AAE/CE,MAAAA,KAF+C;AAG/CD,MAAAA,GAH+C;AAI/CI,MAAAA,MAAM,EAAEL;AAJuC,KAAD,CAAhD;AAMA,UAAMM,MAAM,GAAGC,MAAM,CAACC,MAAP,CAAc,IAAd,CAAf;;AAP6B,+CAWxBL,iBAAiB,CAACM,YAXM;AAAA;;AAAA;AAQ7B,0DAGqC;AAAA;AAAA,cAFvBC,IAEuB,eAFnCC,UAEmC;AAAA,cADfC,KACe,eADnCC,gBACmC,CADfD,KACe;AACnCN,QAAAA,MAAM,CAACI,IAAD,CAAN,GAAeE,KAAf;AACD;AAb4B;AAAA;AAAA;AAAA;AAAA;;AAc7B,WAAON,MAAP;AACD,GAhBsB;;AAAA;AAAA;AAAA;AAAA,KAiBvB;AAAEQ,EAAAA,OAAO,EAAE,IAAX;AAAiBC,EAAAA,UAAU,EAAE,CAAC,CAAC;AAAEf,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,GAAD,CAAD,KAA2Bc,IAAI,CAACC,SAAL,CAAe;AAAEjB,IAAAA,GAAF;AAAOC,IAAAA,GAAP;AAAYC,IAAAA;AAAZ,GAAf;AAAxD,CAjBuB,CAAzB","sourcesContent":["'use strict';\n\nconst memoizee = require('memoizee');\nconst { getAccessKeyForTenant, getDeployProfile } = require('@serverless/platform-sdk');\n\nmodule.exports = memoizee(\n  async ({ org, app, stage }) => {\n    const deploymentProfile = await getDeployProfile({\n      accessKey: await getAccessKeyForTenant(org),\n      stage,\n      app,\n      tenant: org,\n    });\n    const params = Object.create(null);\n    for (const {\n      secretName: name,\n      secretProperties: { value },\n    } of deploymentProfile.secretValues) {\n      params[name] = value;\n    }\n    return params;\n  },\n  { promise: true, normalizer: ([{ org, app, stage }]) => JSON.stringify({ org, app, stage }) }\n);\n"],"file":"resolveParams.js"}