{"version":3,"sources":["../../lib/serializeError.js"],"names":["require","entries","destroyCircular","from","seen","to","Array","isArray","push","key","value","includes","slice","commonProperties","property","serializeError","name","module","exports","default"],"mappings":"AAAA,a,CAEA;AACA;;;;;;;;;;;;;;;;iBAEoBA,OAAO,CAAC,QAAD,C;MAAnBC,O,YAAAA,O;;AAER,MAAMC,eAAe,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AACtC,QAAMC,EAAE,GAAGC,KAAK,CAACC,OAAN,CAAcJ,IAAd,IAAsB,EAAtB,GAA2B,EAAtC;AAEAC,EAAAA,IAAI,CAACI,IAAL,CAAUL,IAAV;;AAHsC,6CAKXF,OAAO,CAACE,IAAD,CALI;AAAA;;AAAA;AAKtC,wDAA0C;AAAA;AAAA,YAA9BM,GAA8B;AAAA,YAAzBC,KAAyB;;AACxC,UAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC/B;AACD;;AAED,UAAI,CAACA,KAAD,IAAU,OAAOA,KAAP,KAAiB,QAA/B,EAAyC;AACvCL,QAAAA,EAAE,CAACI,GAAD,CAAF,GAAUC,KAAV;AACA;AACD;;AAED,UAAI,CAACN,IAAI,CAACO,QAAL,CAAcR,IAAI,CAACM,GAAD,CAAlB,CAAL,EAA+B;AAC7BJ,QAAAA,EAAE,CAACI,GAAD,CAAF,GAAUP,eAAe,CAACC,IAAI,CAACM,GAAD,CAAL,EAAYL,IAAI,CAACQ,KAAL,EAAZ,CAAzB;AACA;AACD;;AAEDP,MAAAA,EAAE,CAACI,GAAD,CAAF,GAAU,YAAV;AACD;AArBqC;AAAA;AAAA;AAAA;AAAA;;AAuBtC,QAAMI,gBAAgB,GAAG,CAAC,MAAD,EAAS,SAAT,EAAoB,OAApB,EAA6B,MAA7B,CAAzB;;AAEA,uCAAuBA,gBAAvB,uCAAyC;AAApC,UAAMC,QAAQ,wBAAd;;AACH,QAAI,OAAOX,IAAI,CAACW,QAAD,CAAX,KAA0B,QAA9B,EAAwC;AACtCT,MAAAA,EAAE,CAACS,QAAD,CAAF,GAAeX,IAAI,CAACW,QAAD,CAAnB;AACD;AACF;;AAED,SAAOT,EAAP;AACD,CAhCD;;AAkCA,MAAMU,cAAc,GAAIL,KAAD,IAAW;AAChC,MAAI,OAAOA,KAAP,KAAiB,QAArB,EAA+B;AAC7B,WAAOR,eAAe,CAACQ,KAAD,EAAQ,EAAR,CAAtB;AACD,GAH+B,CAKhC;;;AACA,MAAI,OAAOA,KAAP,KAAiB,UAArB,EAAiC;AAC/B;AACA,WAAQ,cAAaA,KAAK,CAACM,IAAN,IAAc,WAAY,GAA/C;AACD;;AAED,SAAON,KAAP;AACD,CAZD;;AAcAO,MAAM,CAACC,OAAP,GAAiBH,cAAjB,C,CACA;;AACAE,MAAM,CAACC,OAAP,CAAeC,OAAf,GAAyBJ,cAAzB","sourcesContent":["'use strict';\n\n// coppied from https://github.com/sindresorhus/serialize-error/blob/master/index.js and converted\n// to use _.entries instead of Object.entries. and linted for our standards\n\nconst { entries } = require('lodash');\n\nconst destroyCircular = (from, seen) => {\n  const to = Array.isArray(from) ? [] : {};\n\n  seen.push(from);\n\n  for (const [key, value] of entries(from)) {\n    if (typeof value === 'function') {\n      continue;\n    }\n\n    if (!value || typeof value !== 'object') {\n      to[key] = value;\n      continue;\n    }\n\n    if (!seen.includes(from[key])) {\n      to[key] = destroyCircular(from[key], seen.slice());\n      continue;\n    }\n\n    to[key] = '[Circular]';\n  }\n\n  const commonProperties = ['name', 'message', 'stack', 'code'];\n\n  for (const property of commonProperties) {\n    if (typeof from[property] === 'string') {\n      to[property] = from[property];\n    }\n  }\n\n  return to;\n};\n\nconst serializeError = (value) => {\n  if (typeof value === 'object') {\n    return destroyCircular(value, []);\n  }\n\n  // People sometimes throw things besides Error objectsâ€¦\n  if (typeof value === 'function') {\n    // `JSON.stringify()` discards functions. We do too, unless a function is thrown directly.\n    return `[Function: ${value.name || 'anonymous'}]`;\n  }\n\n  return value;\n};\n\nmodule.exports = serializeError;\n// TODO: Remove this for the next major release\nmodule.exports.default = serializeError;\n"],"file":"serializeError.js"}