{"version":3,"sources":["../../../../lib/safeguards/policies/allowed-runtimes.js"],"names":["module","exports","allowedRuntimesPolicy","policy","service","allowedRuntimes","failed","Object","keys","declaration","functions","fnName","includes","runtime","provider","fail","JSON","stringify","approve","docs"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,qBAAT,CAA+BC,MAA/B,EAAuCC,OAAvC,EAAgDC,eAAhD,EAAiE;AAChF,MAAIC,MAAM,GAAG,KAAb;;AACA,kCAAqBC,MAAM,CAACC,IAAP,CAAYJ,OAAO,CAACK,WAAR,CAAoBC,SAAhC,CAArB,kCAAiE;AAA5D,UAAMC,MAAM,mBAAZ;;AACH,QACE,CAACN,eAAe,CAACO,QAAhB,CACCR,OAAO,CAACK,WAAR,CAAoBC,SAApB,CAA8BC,MAA9B,EAAsCE,OAAtC,IAAiDT,OAAO,CAACK,WAAR,CAAoBK,QAApB,CAA6BD,OAD/E,CADH,EAIE;AACAP,MAAAA,MAAM,GAAG,IAAT;AACAH,MAAAA,MAAM,CAACY,IAAP,CACG,uBAAsBJ,MAAO,uCAAsCK,IAAI,CAACC,SAAL,CAClEZ,eADkE,CAElE,EAHJ;AAKD;AACF;;AACD,MAAI,CAACC,MAAL,EAAa;AACXH,IAAAA,MAAM,CAACe,OAAP;AACD;AACF,CAnBD;;AAqBAlB,MAAM,CAACC,OAAP,CAAekB,IAAf,GAAsB,oCAAtB","sourcesContent":["'use strict';\n\nmodule.exports = function allowedRuntimesPolicy(policy, service, allowedRuntimes) {\n  let failed = false;\n  for (const fnName of Object.keys(service.declaration.functions)) {\n    if (\n      !allowedRuntimes.includes(\n        service.declaration.functions[fnName].runtime || service.declaration.provider.runtime\n      )\n    ) {\n      failed = true;\n      policy.fail(\n        `Runtime of function ${fnName} not in list of permitted runtimes: ${JSON.stringify(\n          allowedRuntimes\n        )}`\n      );\n    }\n  }\n  if (!failed) {\n    policy.approve();\n  }\n};\n\nmodule.exports.docs = 'http://slss.io/sg-allowed-runtimes';\n"],"file":"allowed-runtimes.js"}