{"version":3,"sources":["../../../lib/interactiveCli/utils.js"],"names":["require","createAccessKeyForTenant","writeConfigFile","module","exports","resolveAccessKey","user","orgName","accessKeys","token","users","userId","dashboard","sleep","timeout","Promise","resolve","setTimeout"],"mappings":"AAAA;;;;;;iBAEsDA,OAAO,CAAC,0BAAD,C;MAArDC,wB,YAAAA,wB;MAA0BC,e,YAAAA,e;;AAElCC,MAAM,CAACC,OAAP,GAAiB;AACfC,EAAAA,gBAAgB;AAAA,8CAAE,WAAOC,IAAP,EAAaC,OAAb,EAAyB;AACzC,UAAID,IAAI,CAACE,UAAL,IAAmBF,IAAI,CAACE,UAAL,CAAgBD,OAAhB,CAAvB,EAAiD,OAAOD,IAAI,CAACE,UAAL,CAAgBD,OAAhB,CAAP;AACjD,YAAME,KAAK,SAASR,wBAAwB,CAACM,OAAD,CAA5C;AACA,YAAML,eAAe,CAAC;AACpBQ,QAAAA,KAAK,EAAE;AAAE,WAACJ,IAAI,CAACK,MAAN,GAAe;AAAEC,YAAAA,SAAS,EAAE;AAAEJ,cAAAA,UAAU,EAAE;AAAE,iBAACD,OAAD,GAAWE;AAAb;AAAd;AAAb;AAAjB;AADa,OAAD,CAArB;AAGA,aAAOA,KAAP;AACD,KAPe;;AAAA;AAAA;AAAA;;AAAA;AAAA,KADD;AASfI,EAAAA,KAAK,EAAGC,OAAD,IAAa,IAAIC,OAAJ,CAAaC,OAAD,IAAaC,UAAU,CAACD,OAAD,EAAUF,OAAV,CAAnC;AATL,CAAjB","sourcesContent":["'use strict';\n\nconst { createAccessKeyForTenant, writeConfigFile } = require('@serverless/platform-sdk');\n\nmodule.exports = {\n  resolveAccessKey: async (user, orgName) => {\n    if (user.accessKeys && user.accessKeys[orgName]) return user.accessKeys[orgName];\n    const token = await createAccessKeyForTenant(orgName);\n    await writeConfigFile({\n      users: { [user.userId]: { dashboard: { accessKeys: { [orgName]: token } } } },\n    });\n    return token;\n  },\n  sleep: (timeout) => new Promise((resolve) => setTimeout(resolve, timeout)),\n};\n"],"file":"utils.js"}